{"ast":null,"code":"var _jsxFileName = \"/Users/walesolagbade/streaming_app/client/src/components/SynchronizedAudioPlayer.js\",\n  _s = $RefreshSig$();\n// Debug: log current track and file URL\nuseEffect(() => {\n  console.log('[Player Debug] currentTrack:', currentTrack);\n  if (currentTrack) {\n    console.log('[Player Debug] file_url:', currentTrack.file_url);\n  }\n}, [currentTrack]);\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Box, Card, IconButton, Slider, Typography, LinearProgress, Chip } from '@mui/material';\nimport { PlayArrow, Pause, SkipNext, SkipPrevious, VolumeUp, VolumeOff, QueueMusic, Headphones, MusicNote, Equalizer, Visibility } from '@mui/icons-material';\nimport { useSocket } from '../contexts/SocketContext_enhanced';\nimport { apiFetch } from '../utils/api';\nimport { formatPlays } from '../utils/format';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SynchronizedAudioPlayer = ({\n  roomId,\n  isHost,\n  tracks = []\n}) => {\n  _s();\n  // Playback state (declare all before any code that uses them)\n  const [currentTrack, setCurrentTrack] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [volume, setVolume] = useState(70);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [syncTimeout, setSyncTimeout] = useState(null);\n  const [isSeeking, setIsSeeking] = useState(false);\n  const [isLocalAction, setIsLocalAction] = useState(false);\n\n  // Helper to determine file type\n  const getFileType = fileUrl => {\n    if (!fileUrl) return 'audio';\n    const ext = fileUrl.split('.').pop().toLowerCase();\n    if (ext === 'mp4') return 'video';\n    return 'audio';\n  };\n\n  // Track file type for currentTrack\n  const fileType = getFileType(currentTrack === null || currentTrack === void 0 ? void 0 : currentTrack.file_url);\n  useEffect(() => {\n    console.log('[SynchronizedAudioPlayer] tracks prop changed:', tracks);\n  }, [tracks]);\n  const {\n    socket\n  } = useSocket();\n  const audioRef = useRef(null);\n  const incrementedRef = useRef(new Set());\n  const lastIncrementAtRef = useRef({});\n  const postIncrementPlay = useCallback(trackId => {\n    if (!trackId) return;\n    const now = Date.now();\n    const last = lastIncrementAtRef.current[trackId] || 0;\n    if (now - last < 150) return; // tiny debounce window\n    lastIncrementAtRef.current[trackId] = now;\n    incrementedRef.current.add(trackId);\n    if (typeof window !== 'undefined') {\n      window.dispatchEvent(new CustomEvent('play-debug', {\n        detail: {\n          type: 'play-increment',\n          id: trackId,\n          ts: Date.now(),\n          roomId\n        }\n      }));\n    }\n    apiFetch(`/api/tracks/${trackId}/play`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        roomId\n      })\n    }).catch(() => {});\n  }, [roomId]);\n\n  // ...existing code...\n\n  // Format time for display\n  const formatTime = seconds => {\n    if (!seconds || isNaN(seconds)) return '0:00';\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Handle play/pause\n  const handlePlayPause = useCallback(() => {\n    console.log('ðŸŽ® Play/pause clicked - isHost:', isHost, 'isPlaying:', isPlaying, 'currentTrack:', currentTrack === null || currentTrack === void 0 ? void 0 : currentTrack.title, 'currentPosition:', currentTime);\n    if (!isHost) {\n      console.log('âŒ Not host, cannot control playback');\n      return;\n    }\n    setIsLocalAction(true);\n    if (isPlaying) {\n      var _audioRef$current;\n      // Currently playing, so pause at current position\n      const currentPosition = ((_audioRef$current = audioRef.current) === null || _audioRef$current === void 0 ? void 0 : _audioRef$current.currentTime) || currentTime || 0;\n      console.log('â¸ï¸ Pausing audio at position:', currentPosition);\n      socket.emit('room:pause', {\n        roomId,\n        currentTime: currentPosition\n      });\n    } else {\n      // Currently paused or stopped, so resume from current position\n      if (currentTrack) {\n        const resumePosition = currentTime || 0;\n        console.log('â–¶ï¸ Resuming track at position:', resumePosition);\n        socket.emit('room:resume', {\n          roomId,\n          position: resumePosition\n        });\n      } else if (tracks.length > 0) {\n        // No current track, start first track\n        console.log('ðŸŽµ Starting first track:', tracks[0].title);\n        socket.emit('room:play', {\n          roomId,\n          trackId: tracks[0].id,\n          currentTime: 0\n        });\n        // Only host should count the play to avoid duplicates\n        if (isHost && !incrementedRef.current.has(tracks[0].id)) {\n          postIncrementPlay(tracks[0].id);\n        }\n      } else {\n        console.log('âŒ No tracks available to play');\n      }\n    }\n  }, [isHost, isPlaying, currentTrack, currentTime, roomId, socket, tracks]);\n\n  // Handle next track\n  const handleNext = useCallback(() => {\n    if (!isHost) return;\n    setIsLocalAction(true);\n    socket.emit('room:next-track', {\n      roomId\n    });\n  }, [isHost, roomId, socket]);\n\n  // Handle previous track\n  const handlePrevious = useCallback(() => {\n    if (!isHost) return;\n    setIsLocalAction(true);\n    socket.emit('room:previous-track', {\n      roomId\n    });\n  }, [isHost, roomId, socket]);\n\n  // Handle seek\n  const handleSeek = useCallback(newTime => {\n    if (!isHost || !audioRef.current) return;\n    setIsLocalAction(true);\n    setIsSeeking(true);\n    socket.emit('room:seek', {\n      roomId,\n      currentTime: newTime\n    });\n\n    // Clear seeking state after a delay\n    setTimeout(() => setIsSeeking(false), 100);\n  }, [isHost, roomId, socket]);\n\n  // Handle volume change\n  const handleVolumeChange = useCallback(newVolume => {\n    if (!isHost) return;\n    setIsLocalAction(true);\n    socket.emit('room:volume', {\n      roomId,\n      volume: newVolume\n    });\n  }, [isHost, roomId, socket]);\n\n  // Update audio element time and playing state\n  const syncAudioElement = useCallback(async state => {\n    if (!audioRef.current) {\n      return;\n    }\n\n    // Reset local action flag after processing\n    if (isLocalAction) {\n      setIsLocalAction(false);\n    }\n    try {\n      const audio = audioRef.current;\n\n      // Set volume\n      audio.volume = (state.masterVolume || 70) / 100;\n\n      // Load track if different\n      if (state.currentTrackId && (!currentTrack || currentTrack.id !== state.currentTrackId)) {\n        const track = tracks.find(t => t.id === state.currentTrackId);\n        if (track) {\n          setCurrentTrack(track);\n          setIsLoading(true);\n          audio.src = track.file_url;\n          await new Promise(resolve => {\n            audio.onloadeddata = resolve;\n          });\n          setIsLoading(false);\n        }\n      }\n\n      // Sync time position (with tolerance for network delay)\n      const timeDiff = Math.abs(audio.currentTime - (state.currentPosition || 0));\n      if (timeDiff > 1) {\n        // Only sync if difference is significant\n        audio.currentTime = state.currentPosition || 0;\n      }\n\n      // Sync play/pause state - always sync regardless of local action\n      console.log('ðŸ”„ Syncing audio state - server isPlaying:', state.isPlaying, 'audio paused:', audio.paused);\n      if (state.isPlaying && audio.paused) {\n        console.log('ðŸŽµ Syncing to PLAY state');\n        await audio.play();\n      } else if (!state.isPlaying && !audio.paused) {\n        console.log('â¸ï¸ Syncing to PAUSE state');\n        audio.pause();\n      } else {\n        console.log('âœ… Audio state already in sync');\n      }\n    } catch (error) {\n      console.error('Audio sync error:', error);\n      setIsLoading(false);\n    }\n  }, [currentTrack, tracks, isLocalAction]);\n\n  // Socket event listeners\n  useEffect(() => {\n    if (!socket) return;\n\n    // Initial sync when joining room\n    const handleSyncState = state => {\n      console.log('ðŸ”„ Syncing to room state:', state);\n      setIsPlaying(state.isPlaying || false);\n      setCurrentTime(state.currentPosition || 0);\n      setVolume(state.masterVolume || 70);\n      syncAudioElement(state);\n    };\n\n    // Real-time state updates\n    const handleStateUpdate = state => {\n      console.log('ðŸ“¡ Room state update:', state);\n      setIsPlaying(state.isPlaying || false);\n      setCurrentTime(state.currentPosition || 0);\n      setVolume(state.masterVolume || 70);\n      if (isHost && state.isPlaying && state.currentTrackId && !incrementedRef.current.has(state.currentTrackId)) {\n        postIncrementPlay(state.currentTrackId);\n      }\n\n      // Clear any pending sync and schedule new one\n      if (syncTimeout) clearTimeout(syncTimeout);\n      setSyncTimeout(setTimeout(() => syncAudioElement(state), 50));\n    };\n    socket.on('room:sync-state', handleSyncState);\n    socket.on('room:state-update', handleStateUpdate);\n\n    // Merge live play_count updates into local currentTrack\n    const handlePlayCount = ({\n      trackId,\n      play_count\n    }) => {\n      setCurrentTrack(prev => prev && prev.id === trackId ? {\n        ...prev,\n        play_count\n      } : prev);\n    };\n    socket.on('track:play-count-updated', handlePlayCount);\n    return () => {\n      socket.off('room:sync-state', handleSyncState);\n      socket.off('room:state-update', handleStateUpdate);\n      socket.off('track:play-count-updated', handlePlayCount);\n      if (syncTimeout) clearTimeout(syncTimeout);\n    };\n  }, [socket, syncAudioElement, syncTimeout]);\n\n  // Audio element event listeners\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n    const handleTimeUpdate = () => {\n      if (!isSeeking && !isLocalAction) {\n        setCurrentTime(audio.currentTime);\n      }\n    };\n    const handleDurationChange = () => {\n      setDuration(audio.duration || 0);\n    };\n    const handleLoadStart = () => setIsLoading(true);\n    const handleCanPlay = () => setIsLoading(false);\n    const handleError = e => {\n      console.error('Audio error:', e);\n      setIsLoading(false);\n    };\n    audio.addEventListener('timeupdate', handleTimeUpdate);\n    audio.addEventListener('durationchange', handleDurationChange);\n    audio.addEventListener('loadstart', handleLoadStart);\n    audio.addEventListener('canplay', handleCanPlay);\n    audio.addEventListener('error', handleError);\n    return () => {\n      audio.removeEventListener('timeupdate', handleTimeUpdate);\n      audio.removeEventListener('durationchange', handleDurationChange);\n      audio.removeEventListener('loadstart', handleLoadStart);\n      audio.removeEventListener('canplay', handleCanPlay);\n      audio.removeEventListener('error', handleError);\n    };\n  }, [isSeeking, isLocalAction]);\n\n  // Auto-load first track when tracks become available\n  useEffect(() => {\n    console.log('ðŸ” Auto-load check - tracks:', tracks.length, 'currentTrack:', currentTrack === null || currentTrack === void 0 ? void 0 : currentTrack.title, 'audioRef:', !!audioRef.current);\n    if (tracks.length > 0 && !currentTrack && audioRef.current) {\n      console.log('ðŸŽµ Loading first track:', tracks[0].title, 'URL:', tracks[0].file_url);\n      setCurrentTrack(tracks[0]);\n      audioRef.current.src = tracks[0].file_url;\n    }\n  }, [tracks, currentTrack]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    sx: {\n      p: 3,\n      background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)',\n      backdropFilter: 'blur(20px)',\n      border: '1px solid rgba(255, 255, 255, 0.2)',\n      borderRadius: 4,\n      position: 'relative',\n      overflow: 'hidden',\n      '&::before': {\n        content: '\"\"',\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: isPlaying ? 'linear-gradient(45deg, rgba(78, 205, 196, 0.1), rgba(68, 160, 141, 0.1))' : 'transparent',\n        transition: 'all 0.3s ease',\n        zIndex: -1\n      }\n    },\n    children: [currentTrack && currentTrack.file_url ? fileType === 'audio' ? /*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: audioRef,\n      preload: \"metadata\",\n      style: {\n        display: 'none'\n      },\n      src: currentTrack.file_url\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: audioRef,\n      preload: \"metadata\",\n      src: currentTrack.file_url,\n      style: {\n        width: '100%',\n        maxHeight: 320,\n        background: '#000',\n        borderRadius: 8,\n        marginBottom: 16\n      },\n      controls: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        color: 'red',\n        textAlign: 'center',\n        mb: 2\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        children: \"No track loaded or file URL missing.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 2,\n        p: 1,\n        bgcolor: 'rgba(0,0,0,0.1)',\n        borderRadius: 2\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"caption\",\n        sx: {\n          color: 'gray'\n        },\n        children: [\"Debug: \", currentTrack ? `Track: ${currentTrack.title}, URL: ${currentTrack.file_url}` : 'No track']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(LinearProgress, {\n      sx: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        backgroundColor: 'rgba(255, 255, 255, 0.1)',\n        '& .MuiLinearProgress-bar': {\n          background: 'linear-gradient(45deg, #4ECDC4, #44A08D)'\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 3,\n        textAlign: 'center'\n      },\n      children: [fileType === 'video' && (currentTrack === null || currentTrack === void 0 ? void 0 : currentTrack.file_url) && /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"caption\",\n        sx: {\n          color: 'rgba(255,255,255,0.7)',\n          mb: 1,\n          display: 'block'\n        },\n        children: \"(MP4 Video - audio will play, video visible below)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          mb: 2,\n          gap: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            width: 64,\n            height: 64,\n            borderRadius: '50%',\n            background: currentTrack ? 'linear-gradient(45deg, #4ECDC4, #44A08D)' : 'rgba(255, 255, 255, 0.1)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            animation: isPlaying ? 'beat 1s infinite' : 'none',\n            transition: 'all 0.3s ease'\n          },\n          children: isPlaying ? /*#__PURE__*/_jsxDEV(Equalizer, {\n            sx: {\n              color: 'white',\n              fontSize: 28\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 26\n          }, this) : currentTrack ? /*#__PURE__*/_jsxDEV(MusicNote, {\n            sx: {\n              color: 'white',\n              fontSize: 28\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(QueueMusic, {\n            sx: {\n              color: 'rgba(255,255,255,0.5)',\n              fontSize: 28\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flex: 1,\n            textAlign: 'left'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            sx: {\n              color: 'white',\n              mb: 0.5,\n              fontWeight: 'bold',\n              textShadow: '0 2px 4px rgba(0,0,0,0.3)'\n            },\n            children: (currentTrack === null || currentTrack === void 0 ? void 0 : currentTrack.title) || 'No track selected'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            sx: {\n              color: 'rgba(255, 255, 255, 0.8)',\n              mb: 0.5\n            },\n            children: (currentTrack === null || currentTrack === void 0 ? void 0 : currentTrack.artist) || 'Unknown artist'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Chip, {\n            label: formatPlays(typeof (currentTrack === null || currentTrack === void 0 ? void 0 : currentTrack.play_count) === 'number' ? currentTrack.play_count : 0),\n            size: \"small\",\n            sx: {\n              mr: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Chip, {\n              size: \"small\",\n              label: isPlaying ? \"Playing\" : currentTrack ? \"Paused\" : \"Stopped\",\n              sx: {\n                background: isPlaying ? 'linear-gradient(45deg, #4ECDC4, #44A08D)' : 'rgba(255, 255, 255, 0.2)',\n                color: 'white',\n                fontWeight: 'bold'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 15\n            }, this), currentTrack && /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              sx: {\n                color: 'rgba(255, 255, 255, 0.6)',\n                background: 'rgba(255, 255, 255, 0.1)',\n                px: 1,\n                py: 0.5,\n                borderRadius: 1\n              },\n              children: [\"Track \", tracks.findIndex(t => t.id === currentTrack.id) + 1, \" of \", tracks.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 2,\n          mb: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          sx: {\n            color: 'rgba(255, 255, 255, 0.8)',\n            minWidth: '45px',\n            fontFamily: 'monospace'\n          },\n          children: formatTime(currentTime)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flex: 1,\n            position: 'relative'\n          },\n          children: /*#__PURE__*/_jsxDEV(Slider, {\n            value: currentTime,\n            max: duration || 100,\n            onChange: (_, value) => !isSeeking && setCurrentTime(value),\n            onChangeCommitted: (_, value) => handleSeek(value),\n            disabled: !isHost || !currentTrack,\n            sx: {\n              height: 8,\n              '& .MuiSlider-track': {\n                background: 'linear-gradient(45deg, #4ECDC4, #44A08D)',\n                border: 'none',\n                height: 8\n              },\n              '& .MuiSlider-rail': {\n                backgroundColor: 'rgba(255, 255, 255, 0.2)',\n                height: 8\n              },\n              '& .MuiSlider-thumb': {\n                height: 20,\n                width: 20,\n                backgroundColor: '#fff',\n                border: '3px solid #4ECDC4',\n                boxShadow: '0 4px 8px rgba(0,0,0,0.3)',\n                '&:hover, &.Mui-focusVisible': {\n                  boxShadow: '0 0 0 8px rgba(78, 205, 196, 0.16)'\n                },\n                '&.Mui-active': {\n                  boxShadow: '0 0 0 14px rgba(78, 205, 196, 0.16)'\n                }\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          sx: {\n            color: 'rgba(255, 255, 255, 0.8)',\n            minWidth: '45px',\n            fontFamily: 'monospace',\n            textAlign: 'right'\n          },\n          children: formatTime(duration)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          sx: {\n            color: 'rgba(255, 255, 255, 0.6)',\n            background: 'rgba(255, 255, 255, 0.1)',\n            px: 1,\n            py: 0.5,\n            borderRadius: 1\n          },\n          children: duration > 0 ? `${Math.round(currentTime / duration * 100)}% complete` : '0% complete'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: 2,\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handlePrevious,\n        disabled: !isHost || tracks.length <= 1,\n        sx: {\n          color: 'white',\n          background: 'rgba(255, 255, 255, 0.1)',\n          '&:hover': {\n            background: 'rgba(255, 255, 255, 0.2)',\n            transform: 'scale(1.1)'\n          },\n          '&:disabled': {\n            color: 'rgba(255, 255, 255, 0.3)',\n            background: 'rgba(255, 255, 255, 0.05)'\n          },\n          transition: 'all 0.2s ease'\n        },\n        children: /*#__PURE__*/_jsxDEV(SkipPrevious, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handlePlayPause,\n        disabled: !isHost || !currentTrack && tracks.length === 0,\n        sx: {\n          color: 'white',\n          background: isPlaying ? 'linear-gradient(45deg, #FF6B6B, #FF8E8E)' : 'linear-gradient(45deg, #4ECDC4, #44A08D)',\n          width: 64,\n          height: 64,\n          boxShadow: '0 8px 16px rgba(0,0,0,0.3)',\n          '&:hover': {\n            background: isPlaying ? 'linear-gradient(45deg, #FF8E8E, #FF6B6B)' : 'linear-gradient(45deg, #44A08D, #4ECDC4)',\n            transform: 'scale(1.1)',\n            boxShadow: '0 12px 24px rgba(0,0,0,0.4)'\n          },\n          '&:disabled': {\n            color: 'rgba(255, 255, 255, 0.3)',\n            background: 'rgba(255, 255, 255, 0.1)',\n            boxShadow: 'none'\n          },\n          transition: 'all 0.3s ease'\n        },\n        children: isPlaying ? /*#__PURE__*/_jsxDEV(Pause, {\n          sx: {\n            fontSize: 32\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 24\n        }, this) : /*#__PURE__*/_jsxDEV(PlayArrow, {\n          sx: {\n            fontSize: 32\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 58\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handleNext,\n        disabled: !isHost || tracks.length <= 1,\n        sx: {\n          color: 'white',\n          background: 'rgba(255, 255, 255, 0.1)',\n          '&:hover': {\n            background: 'rgba(255, 255, 255, 0.2)',\n            transform: 'scale(1.1)'\n          },\n          '&:disabled': {\n            color: 'rgba(255, 255, 255, 0.3)',\n            background: 'rgba(255, 255, 255, 0.05)'\n          },\n          transition: 'all 0.2s ease'\n        },\n        children: /*#__PURE__*/_jsxDEV(SkipNext, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: 2,\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: () => setIsMuted(!isMuted),\n        disabled: !isHost,\n        sx: {\n          color: 'white',\n          '&:disabled': {\n            color: 'rgba(255, 255, 255, 0.3)'\n          }\n        },\n        children: isMuted || volume === 0 ? /*#__PURE__*/_jsxDEV(VolumeOff, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 38\n        }, this) : /*#__PURE__*/_jsxDEV(VolumeUp, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 54\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          flex: 1,\n          display: 'flex',\n          alignItems: 'center',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Slider, {\n          value: isMuted ? 0 : volume,\n          onChange: (_, value) => {\n            setVolume(value);\n            setIsMuted(value === 0);\n          },\n          onChangeCommitted: (_, value) => handleVolumeChange(value),\n          disabled: !isHost,\n          sx: {\n            color: '#4ECDC4',\n            '& .MuiSlider-thumb': {\n              backgroundColor: '#4ECDC4',\n              width: 16,\n              height: 16,\n              '&:hover, &.Mui-focusVisible': {\n                boxShadow: '0 0 0 8px rgba(78, 205, 196, 0.16)'\n              }\n            },\n            '& .MuiSlider-track': {\n              backgroundColor: '#4ECDC4',\n              height: 4\n            },\n            '& .MuiSlider-rail': {\n              backgroundColor: 'rgba(255, 255, 255, 0.3)',\n              height: 4\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          sx: {\n            color: 'rgba(255, 255, 255, 0.7)',\n            minWidth: '35px',\n            textAlign: 'right',\n            fontFamily: 'monospace'\n          },\n          children: [Math.round(isMuted ? 0 : volume), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 606,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        textAlign: 'center'\n      },\n      children: isHost ? /*#__PURE__*/_jsxDEV(Chip, {\n        icon: /*#__PURE__*/_jsxDEV(Headphones, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 19\n        }, this),\n        label: \"Host Controls\",\n        size: \"small\",\n        sx: {\n          background: 'linear-gradient(45deg, #4ECDC4, #44A08D)',\n          color: 'white',\n          fontWeight: 'bold'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 662,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Chip, {\n        icon: /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 19\n        }, this),\n        label: \"Listener Mode\",\n        size: \"small\",\n        sx: {\n          background: 'rgba(255, 255, 255, 0.1)',\n          color: 'rgba(255, 255, 255, 0.7)',\n          border: '1px solid rgba(255, 255, 255, 0.2)'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 673,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 322,\n    columnNumber: 5\n  }, this);\n};\n_s(SynchronizedAudioPlayer, \"UEN4Rp6NUCSf6IafsewfBNsxMFg=\", false, function () {\n  return [useSocket];\n});\n_c = SynchronizedAudioPlayer;\nexport default SynchronizedAudioPlayer;\nvar _c;\n$RefreshReg$(_c, \"SynchronizedAudioPlayer\");","map":{"version":3,"names":["useEffect","console","log","currentTrack","file_url","React","useState","useRef","useCallback","Box","Card","IconButton","Slider","Typography","LinearProgress","Chip","PlayArrow","Pause","SkipNext","SkipPrevious","VolumeUp","VolumeOff","QueueMusic","Headphones","MusicNote","Equalizer","Visibility","useSocket","apiFetch","formatPlays","jsxDEV","_jsxDEV","SynchronizedAudioPlayer","roomId","isHost","tracks","_s","setCurrentTrack","isPlaying","setIsPlaying","currentTime","setCurrentTime","duration","setDuration","volume","setVolume","isMuted","setIsMuted","isLoading","setIsLoading","syncTimeout","setSyncTimeout","isSeeking","setIsSeeking","isLocalAction","setIsLocalAction","getFileType","fileUrl","ext","split","pop","toLowerCase","fileType","socket","audioRef","incrementedRef","Set","lastIncrementAtRef","postIncrementPlay","trackId","now","Date","last","current","add","window","dispatchEvent","CustomEvent","detail","type","id","ts","method","headers","body","JSON","stringify","catch","formatTime","seconds","isNaN","mins","Math","floor","secs","toString","padStart","handlePlayPause","title","_audioRef$current","currentPosition","emit","resumePosition","position","length","has","handleNext","handlePrevious","handleSeek","newTime","setTimeout","handleVolumeChange","newVolume","syncAudioElement","state","audio","masterVolume","currentTrackId","track","find","t","src","Promise","resolve","onloadeddata","timeDiff","abs","paused","play","pause","error","handleSyncState","handleStateUpdate","clearTimeout","on","handlePlayCount","play_count","prev","off","handleTimeUpdate","handleDurationChange","handleLoadStart","handleCanPlay","handleError","e","addEventListener","removeEventListener","sx","p","background","backdropFilter","border","borderRadius","overflow","content","top","left","right","bottom","transition","zIndex","children","ref","preload","style","display","fileName","_jsxFileName","lineNumber","columnNumber","width","maxHeight","marginBottom","controls","color","textAlign","mb","variant","mt","bgcolor","backgroundColor","alignItems","justifyContent","gap","height","animation","fontSize","flex","fontWeight","textShadow","artist","label","size","mr","px","py","findIndex","minWidth","fontFamily","value","max","onChange","_","onChangeCommitted","disabled","boxShadow","round","onClick","transform","icon","_c","$RefreshReg$"],"sources":["/Users/walesolagbade/streaming_app/client/src/components/SynchronizedAudioPlayer.js"],"sourcesContent":["  // Debug: log current track and file URL\n  useEffect(() => {\n    console.log('[Player Debug] currentTrack:', currentTrack);\n    if (currentTrack) {\n      console.log('[Player Debug] file_url:', currentTrack.file_url);\n    }\n  }, [currentTrack]);\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Box, Card, IconButton, Slider, Typography, LinearProgress, Chip } from '@mui/material';\nimport { \n  PlayArrow, \n  Pause, \n  SkipNext, \n  SkipPrevious, \n  VolumeUp,\n  VolumeOff,\n  QueueMusic,\n  Headphones,\n  MusicNote,\n  Equalizer,\n  Visibility\n} from '@mui/icons-material';\nimport { useSocket } from '../contexts/SocketContext_enhanced';\nimport { apiFetch } from '../utils/api';\nimport { formatPlays } from '../utils/format';\n\nconst SynchronizedAudioPlayer = ({ roomId, isHost, tracks = [] }) => {\n\n  // Playback state (declare all before any code that uses them)\n  const [currentTrack, setCurrentTrack] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [volume, setVolume] = useState(70);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [syncTimeout, setSyncTimeout] = useState(null);\n  const [isSeeking, setIsSeeking] = useState(false);\n  const [isLocalAction, setIsLocalAction] = useState(false);\n\n  // Helper to determine file type\n  const getFileType = (fileUrl) => {\n    if (!fileUrl) return 'audio';\n    const ext = fileUrl.split('.').pop().toLowerCase();\n    if (ext === 'mp4') return 'video';\n    return 'audio';\n  };\n\n  // Track file type for currentTrack\n  const fileType = getFileType(currentTrack?.file_url);\n  useEffect(() => {\n    console.log('[SynchronizedAudioPlayer] tracks prop changed:', tracks);\n  }, [tracks]);\n  const { socket } = useSocket();\n  const audioRef = useRef(null);\n  const incrementedRef = useRef(new Set());\n  const lastIncrementAtRef = useRef({});\n  const postIncrementPlay = useCallback((trackId) => {\n    if (!trackId) return;\n    const now = Date.now();\n    const last = lastIncrementAtRef.current[trackId] || 0;\n    if (now - last < 150) return; // tiny debounce window\n    lastIncrementAtRef.current[trackId] = now;\n    incrementedRef.current.add(trackId);\n    if (typeof window !== 'undefined') {\n      window.dispatchEvent(new CustomEvent('play-debug', { detail: { type: 'play-increment', id: trackId, ts: Date.now(), roomId } }));\n    }\n    apiFetch(`/api/tracks/${trackId}/play`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ roomId })\n    }).catch(() => {});\n  }, [roomId]);\n  \n  // ...existing code...\n\n  // Format time for display\n  const formatTime = (seconds) => {\n    if (!seconds || isNaN(seconds)) return '0:00';\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Handle play/pause\n  const handlePlayPause = useCallback(() => {\n    console.log('ðŸŽ® Play/pause clicked - isHost:', isHost, 'isPlaying:', isPlaying, 'currentTrack:', currentTrack?.title, 'currentPosition:', currentTime);\n    \n    if (!isHost) {\n      console.log('âŒ Not host, cannot control playback');\n      return;\n    }\n    \n    setIsLocalAction(true);\n    \n    if (isPlaying) {\n      // Currently playing, so pause at current position\n      const currentPosition = audioRef.current?.currentTime || currentTime || 0;\n      console.log('â¸ï¸ Pausing audio at position:', currentPosition);\n      socket.emit('room:pause', {\n        roomId,\n        currentTime: currentPosition\n      });\n    } else {\n      // Currently paused or stopped, so resume from current position\n      if (currentTrack) {\n        const resumePosition = currentTime || 0;\n        console.log('â–¶ï¸ Resuming track at position:', resumePosition);\n        socket.emit('room:resume', { \n          roomId,\n          position: resumePosition\n        });\n      } else if (tracks.length > 0) {\n        // No current track, start first track\n        console.log('ðŸŽµ Starting first track:', tracks[0].title);\n        socket.emit('room:play', {\n          roomId,\n          trackId: tracks[0].id,\n          currentTime: 0\n        });\n        // Only host should count the play to avoid duplicates\n        if (isHost && !incrementedRef.current.has(tracks[0].id)) {\n          postIncrementPlay(tracks[0].id);\n        }\n      } else {\n        console.log('âŒ No tracks available to play');\n      }\n    }\n  }, [isHost, isPlaying, currentTrack, currentTime, roomId, socket, tracks]);\n\n  // Handle next track\n  const handleNext = useCallback(() => {\n    if (!isHost) return;\n    \n    setIsLocalAction(true);\n    socket.emit('room:next-track', { roomId });\n  }, [isHost, roomId, socket]);\n\n  // Handle previous track\n  const handlePrevious = useCallback(() => {\n    if (!isHost) return;\n    \n    setIsLocalAction(true);\n    socket.emit('room:previous-track', { roomId });\n  }, [isHost, roomId, socket]);\n\n  // Handle seek\n  const handleSeek = useCallback((newTime) => {\n    if (!isHost || !audioRef.current) return;\n    \n    setIsLocalAction(true);\n    setIsSeeking(true);\n    \n    socket.emit('room:seek', {\n      roomId,\n      currentTime: newTime\n    });\n    \n    // Clear seeking state after a delay\n    setTimeout(() => setIsSeeking(false), 100);\n  }, [isHost, roomId, socket]);\n\n  // Handle volume change\n  const handleVolumeChange = useCallback((newVolume) => {\n    if (!isHost) return;\n    \n    setIsLocalAction(true);\n    socket.emit('room:volume', {\n      roomId,\n      volume: newVolume\n    });\n  }, [isHost, roomId, socket]);\n\n  // Update audio element time and playing state\n  const syncAudioElement = useCallback(async (state) => {\n    if (!audioRef.current) {\n      return;\n    }\n\n    // Reset local action flag after processing\n    if (isLocalAction) {\n      setIsLocalAction(false);\n    }\n\n    try {\n      const audio = audioRef.current;\n      \n      // Set volume\n      audio.volume = (state.masterVolume || 70) / 100;\n      \n      // Load track if different\n      if (state.currentTrackId && (!currentTrack || currentTrack.id !== state.currentTrackId)) {\n        const track = tracks.find(t => t.id === state.currentTrackId);\n        if (track) {\n          setCurrentTrack(track);\n          setIsLoading(true);\n          audio.src = track.file_url;\n          await new Promise((resolve) => {\n            audio.onloadeddata = resolve;\n          });\n          setIsLoading(false);\n        }\n      }\n      \n      // Sync time position (with tolerance for network delay)\n      const timeDiff = Math.abs(audio.currentTime - (state.currentPosition || 0));\n      if (timeDiff > 1) { // Only sync if difference is significant\n        audio.currentTime = state.currentPosition || 0;\n      }\n      \n      // Sync play/pause state - always sync regardless of local action\n      console.log('ðŸ”„ Syncing audio state - server isPlaying:', state.isPlaying, 'audio paused:', audio.paused);\n      if (state.isPlaying && audio.paused) {\n        console.log('ðŸŽµ Syncing to PLAY state');\n        await audio.play();\n      } else if (!state.isPlaying && !audio.paused) {\n        console.log('â¸ï¸ Syncing to PAUSE state');\n        audio.pause();\n      } else {\n        console.log('âœ… Audio state already in sync');\n      }\n      \n    } catch (error) {\n      console.error('Audio sync error:', error);\n      setIsLoading(false);\n    }\n  }, [currentTrack, tracks, isLocalAction]);\n\n  // Socket event listeners\n  useEffect(() => {\n    if (!socket) return;\n\n    // Initial sync when joining room\n    const handleSyncState = (state) => {\n      console.log('ðŸ”„ Syncing to room state:', state);\n      setIsPlaying(state.isPlaying || false);\n      setCurrentTime(state.currentPosition || 0);\n      setVolume(state.masterVolume || 70);\n      syncAudioElement(state);\n    };\n\n    // Real-time state updates\n    const handleStateUpdate = (state) => {\n      console.log('ðŸ“¡ Room state update:', state);\n      setIsPlaying(state.isPlaying || false);\n      setCurrentTime(state.currentPosition || 0);\n      setVolume(state.masterVolume || 70);\n      if (isHost && state.isPlaying && state.currentTrackId && !incrementedRef.current.has(state.currentTrackId)) {\n        postIncrementPlay(state.currentTrackId);\n      }\n      \n      // Clear any pending sync and schedule new one\n      if (syncTimeout) clearTimeout(syncTimeout);\n      setSyncTimeout(setTimeout(() => syncAudioElement(state), 50));\n    };\n\n    socket.on('room:sync-state', handleSyncState);\n    socket.on('room:state-update', handleStateUpdate);\n\n    // Merge live play_count updates into local currentTrack\n    const handlePlayCount = ({ trackId, play_count }) => {\n      setCurrentTrack(prev => prev && prev.id === trackId ? { ...prev, play_count } : prev);\n    };\n    socket.on('track:play-count-updated', handlePlayCount);\n\n    return () => {\n      socket.off('room:sync-state', handleSyncState);\n      socket.off('room:state-update', handleStateUpdate);\n      socket.off('track:play-count-updated', handlePlayCount);\n      if (syncTimeout) clearTimeout(syncTimeout);\n    };\n  }, [socket, syncAudioElement, syncTimeout]);\n\n  // Audio element event listeners\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n\n    const handleTimeUpdate = () => {\n      if (!isSeeking && !isLocalAction) {\n        setCurrentTime(audio.currentTime);\n      }\n    };\n\n    const handleDurationChange = () => {\n      setDuration(audio.duration || 0);\n    };\n\n    const handleLoadStart = () => setIsLoading(true);\n    const handleCanPlay = () => setIsLoading(false);\n    const handleError = (e) => {\n      console.error('Audio error:', e);\n      setIsLoading(false);\n    };\n\n    audio.addEventListener('timeupdate', handleTimeUpdate);\n    audio.addEventListener('durationchange', handleDurationChange);\n    audio.addEventListener('loadstart', handleLoadStart);\n    audio.addEventListener('canplay', handleCanPlay);\n    audio.addEventListener('error', handleError);\n\n    return () => {\n      audio.removeEventListener('timeupdate', handleTimeUpdate);\n      audio.removeEventListener('durationchange', handleDurationChange);\n      audio.removeEventListener('loadstart', handleLoadStart);\n      audio.removeEventListener('canplay', handleCanPlay);\n      audio.removeEventListener('error', handleError);\n    };\n  }, [isSeeking, isLocalAction]);\n\n  // Auto-load first track when tracks become available\n  useEffect(() => {\n    console.log('ðŸ” Auto-load check - tracks:', tracks.length, 'currentTrack:', currentTrack?.title, 'audioRef:', !!audioRef.current);\n    if (tracks.length > 0 && !currentTrack && audioRef.current) {\n      console.log('ðŸŽµ Loading first track:', tracks[0].title, 'URL:', tracks[0].file_url);\n      setCurrentTrack(tracks[0]);\n      audioRef.current.src = tracks[0].file_url;\n    }\n  }, [tracks, currentTrack]);\n\n  return (\n    <Card \n      sx={{ \n        p: 3, \n        background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)',\n        backdropFilter: 'blur(20px)',\n        border: '1px solid rgba(255, 255, 255, 0.2)',\n        borderRadius: 4,\n        position: 'relative',\n        overflow: 'hidden',\n        '&::before': {\n          content: '\"\"',\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: isPlaying ? \n            'linear-gradient(45deg, rgba(78, 205, 196, 0.1), rgba(68, 160, 141, 0.1))' :\n            'transparent',\n          transition: 'all 0.3s ease',\n          zIndex: -1\n        }\n      }}\n    >\n      {/* Audio/Video element (mp3/mp4 support) */}\n      {currentTrack && currentTrack.file_url ? (\n        fileType === 'audio' ? (\n          <audio ref={audioRef} preload=\"metadata\" style={{ display: 'none' }} src={currentTrack.file_url} />\n        ) : (\n          <video\n            ref={audioRef}\n            preload=\"metadata\"\n            src={currentTrack.file_url}\n            style={{ width: '100%', maxHeight: 320, background: '#000', borderRadius: 8, marginBottom: 16 }}\n            controls={false}\n          />\n        )\n      ) : (\n        <Box sx={{ color: 'red', textAlign: 'center', mb: 2 }}>\n          <Typography variant=\"body2\">No track loaded or file URL missing.</Typography>\n        </Box>\n      )}\n      {/* Debug: show current track and file URL */}\n      <Box sx={{ mt: 2, p: 1, bgcolor: 'rgba(0,0,0,0.1)', borderRadius: 2 }}>\n        <Typography variant=\"caption\" sx={{ color: 'gray' }}>\n          Debug: {currentTrack ? `Track: ${currentTrack.title}, URL: ${currentTrack.file_url}` : 'No track'}\n        </Typography>\n      </Box>\n      \n      {/* Loading indicator */}\n      {isLoading && (\n        <LinearProgress \n          sx={{ \n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            backgroundColor: 'rgba(255, 255, 255, 0.1)',\n            '& .MuiLinearProgress-bar': {\n              background: 'linear-gradient(45deg, #4ECDC4, #44A08D)'\n            }\n          }} \n        />\n      )}\n      \n      {/* Current track info */}\n      <Box sx={{ mb: 3, textAlign: 'center' }}>\n        {fileType === 'video' && currentTrack?.file_url && (\n          <Typography variant=\"caption\" sx={{ color: 'rgba(255,255,255,0.7)', mb: 1, display: 'block' }}>\n            (MP4 Video - audio will play, video visible below)\n          </Typography>\n        )}\n        <Box sx={{ \n          display: 'flex', \n          alignItems: 'center', \n          justifyContent: 'center',\n          mb: 2,\n          gap: 2\n        }}>\n          <Box sx={{\n            width: 64,\n            height: 64,\n            borderRadius: '50%',\n            background: currentTrack ? \n              'linear-gradient(45deg, #4ECDC4, #44A08D)' : \n              'rgba(255, 255, 255, 0.1)',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            animation: isPlaying ? 'beat 1s infinite' : 'none',\n            transition: 'all 0.3s ease'\n          }}>\n            {isPlaying ? <Equalizer sx={{ color: 'white', fontSize: 28 }} /> : \n             currentTrack ? <MusicNote sx={{ color: 'white', fontSize: 28 }} /> :\n             <QueueMusic sx={{ color: 'rgba(255,255,255,0.5)', fontSize: 28 }} />}\n          </Box>\n          \n          <Box sx={{ flex: 1, textAlign: 'left' }}>\n            <Typography variant=\"h5\" sx={{ \n              color: 'white', \n              mb: 0.5,\n              fontWeight: 'bold',\n              textShadow: '0 2px 4px rgba(0,0,0,0.3)'\n            }}>\n              {currentTrack?.title || 'No track selected'}\n            </Typography>\n            <Typography variant=\"body1\" sx={{ \n              color: 'rgba(255, 255, 255, 0.8)',\n              mb: 0.5\n            }}>\n              {currentTrack?.artist || 'Unknown artist'}\n            </Typography>\n            <Chip label={formatPlays(typeof currentTrack?.play_count === 'number' ? currentTrack.play_count : 0)} size=\"small\" sx={{ mr: 1 }} />\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <Chip\n                size=\"small\"\n                label={isPlaying ? \"Playing\" : currentTrack ? \"Paused\" : \"Stopped\"}\n                sx={{\n                  background: isPlaying ? \n                    'linear-gradient(45deg, #4ECDC4, #44A08D)' : \n                    'rgba(255, 255, 255, 0.2)',\n                  color: 'white',\n                  fontWeight: 'bold'\n                }}\n              />\n              {currentTrack && (\n                <Typography variant=\"caption\" sx={{ \n                  color: 'rgba(255, 255, 255, 0.6)',\n                  background: 'rgba(255, 255, 255, 0.1)',\n                  px: 1,\n                  py: 0.5,\n                  borderRadius: 1\n                }}>\n                  Track {tracks.findIndex(t => t.id === currentTrack.id) + 1} of {tracks.length}\n                </Typography>\n              )}\n            </Box>\n          </Box>\n        </Box>\n      </Box>\n\n      {/* Progress section */}\n      <Box sx={{ mb: 3 }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 1 }}>\n          <Typography variant=\"caption\" sx={{ \n            color: 'rgba(255, 255, 255, 0.8)',\n            minWidth: '45px',\n            fontFamily: 'monospace'\n          }}>\n            {formatTime(currentTime)}\n          </Typography>\n          \n          <Box sx={{ flex: 1, position: 'relative' }}>\n            <Slider\n              value={currentTime}\n              max={duration || 100}\n              onChange={(_, value) => !isSeeking && setCurrentTime(value)}\n              onChangeCommitted={(_, value) => handleSeek(value)}\n              disabled={!isHost || !currentTrack}\n              sx={{\n                height: 8,\n                '& .MuiSlider-track': {\n                  background: 'linear-gradient(45deg, #4ECDC4, #44A08D)',\n                  border: 'none',\n                  height: 8\n                },\n                '& .MuiSlider-rail': {\n                  backgroundColor: 'rgba(255, 255, 255, 0.2)',\n                  height: 8\n                },\n                '& .MuiSlider-thumb': {\n                  height: 20,\n                  width: 20,\n                  backgroundColor: '#fff',\n                  border: '3px solid #4ECDC4',\n                  boxShadow: '0 4px 8px rgba(0,0,0,0.3)',\n                  '&:hover, &.Mui-focusVisible': {\n                    boxShadow: '0 0 0 8px rgba(78, 205, 196, 0.16)',\n                  },\n                  '&.Mui-active': {\n                    boxShadow: '0 0 0 14px rgba(78, 205, 196, 0.16)',\n                  }\n                }\n              }}\n            />\n          </Box>\n          \n          <Typography variant=\"caption\" sx={{ \n            color: 'rgba(255, 255, 255, 0.8)',\n            minWidth: '45px',\n            fontFamily: 'monospace',\n            textAlign: 'right'\n          }}>\n            {formatTime(duration)}\n          </Typography>\n        </Box>\n        \n        {/* Progress percentage */}\n        <Box sx={{ display: 'flex', justifyContent: 'center' }}>\n          <Typography variant=\"caption\" sx={{ \n            color: 'rgba(255, 255, 255, 0.6)',\n            background: 'rgba(255, 255, 255, 0.1)',\n            px: 1,\n            py: 0.5,\n            borderRadius: 1\n          }}>\n            {duration > 0 ? `${Math.round((currentTime / duration) * 100)}% complete` : '0% complete'}\n          </Typography>\n        </Box>\n      </Box>\n\n      {/* Control buttons */}\n      <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 2, mb: 3 }}>\n        <IconButton \n          onClick={handlePrevious}\n          disabled={!isHost || tracks.length <= 1}\n          sx={{ \n            color: 'white',\n            background: 'rgba(255, 255, 255, 0.1)',\n            '&:hover': { \n              background: 'rgba(255, 255, 255, 0.2)',\n              transform: 'scale(1.1)'\n            },\n            '&:disabled': { \n              color: 'rgba(255, 255, 255, 0.3)',\n              background: 'rgba(255, 255, 255, 0.05)'\n            },\n            transition: 'all 0.2s ease'\n          }}\n        >\n          <SkipPrevious />\n        </IconButton>\n        \n        <IconButton \n          onClick={handlePlayPause}\n          disabled={!isHost || (!currentTrack && tracks.length === 0)}\n          sx={{ \n            color: 'white', \n            background: isPlaying ? \n              'linear-gradient(45deg, #FF6B6B, #FF8E8E)' :\n              'linear-gradient(45deg, #4ECDC4, #44A08D)',\n            width: 64,\n            height: 64,\n            boxShadow: '0 8px 16px rgba(0,0,0,0.3)',\n            '&:hover': { \n              background: isPlaying ?\n                'linear-gradient(45deg, #FF8E8E, #FF6B6B)' :\n                'linear-gradient(45deg, #44A08D, #4ECDC4)',\n              transform: 'scale(1.1)',\n              boxShadow: '0 12px 24px rgba(0,0,0,0.4)'\n            },\n            '&:disabled': { \n              color: 'rgba(255, 255, 255, 0.3)',\n              background: 'rgba(255, 255, 255, 0.1)',\n              boxShadow: 'none'\n            },\n            transition: 'all 0.3s ease'\n          }}\n        >\n          {isPlaying ? <Pause sx={{ fontSize: 32 }} /> : <PlayArrow sx={{ fontSize: 32 }} />}\n        </IconButton>\n        \n        <IconButton \n          onClick={handleNext}\n          disabled={!isHost || tracks.length <= 1}\n          sx={{ \n            color: 'white',\n            background: 'rgba(255, 255, 255, 0.1)',\n            '&:hover': { \n              background: 'rgba(255, 255, 255, 0.2)',\n              transform: 'scale(1.1)'\n            },\n            '&:disabled': { \n              color: 'rgba(255, 255, 255, 0.3)',\n              background: 'rgba(255, 255, 255, 0.05)'\n            },\n            transition: 'all 0.2s ease'\n          }}\n        >\n          <SkipNext />\n        </IconButton>\n      </Box>\n\n      {/* Volume control */}\n      <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\n        <IconButton \n          onClick={() => setIsMuted(!isMuted)}\n          disabled={!isHost}\n          sx={{ \n            color: 'white',\n            '&:disabled': { color: 'rgba(255, 255, 255, 0.3)' }\n          }}\n        >\n          {isMuted || volume === 0 ? <VolumeOff /> : <VolumeUp />}\n        </IconButton>\n        \n        <Box sx={{ flex: 1, display: 'flex', alignItems: 'center', gap: 1 }}>\n          <Slider\n            value={isMuted ? 0 : volume}\n            onChange={(_, value) => {\n              setVolume(value);\n              setIsMuted(value === 0);\n            }}\n            onChangeCommitted={(_, value) => handleVolumeChange(value)}\n            disabled={!isHost}\n            sx={{\n              color: '#4ECDC4',\n              '& .MuiSlider-thumb': {\n                backgroundColor: '#4ECDC4',\n                width: 16,\n                height: 16,\n                '&:hover, &.Mui-focusVisible': {\n                  boxShadow: '0 0 0 8px rgba(78, 205, 196, 0.16)',\n                }\n              },\n              '& .MuiSlider-track': {\n                backgroundColor: '#4ECDC4',\n                height: 4\n              },\n              '& .MuiSlider-rail': {\n                backgroundColor: 'rgba(255, 255, 255, 0.3)',\n                height: 4\n              }\n            }}\n          />\n          \n          <Typography variant=\"caption\" sx={{ \n            color: 'rgba(255, 255, 255, 0.7)', \n            minWidth: '35px',\n            textAlign: 'right',\n            fontFamily: 'monospace'\n          }}>\n            {Math.round(isMuted ? 0 : volume)}%\n          </Typography>\n        </Box>\n      </Box>\n\n      {/* Host/Participant indicator */}\n      <Box sx={{ textAlign: 'center' }}>\n        {isHost ? (\n          <Chip\n            icon={<Headphones />}\n            label=\"Host Controls\"\n            size=\"small\"\n            sx={{\n              background: 'linear-gradient(45deg, #4ECDC4, #44A08D)',\n              color: 'white',\n              fontWeight: 'bold'\n            }}\n          />\n        ) : (\n          <Chip\n            icon={<Visibility />}\n            label=\"Listener Mode\"\n            size=\"small\"\n            sx={{\n              background: 'rgba(255, 255, 255, 0.1)',\n              color: 'rgba(255, 255, 255, 0.7)',\n              border: '1px solid rgba(255, 255, 255, 0.2)'\n            }}\n          />\n        )}\n      </Box>\n    </Card>\n  );\n};\n\nexport default SynchronizedAudioPlayer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}