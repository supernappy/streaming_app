{"ast":null,"code":"import React,{useState}from'react';import{Dialog,DialogTitle,DialogContent,DialogActions,Button,Box,Typography,Grid,Avatar,Card,CardContent,TextField,CircularProgress,Alert}from'@mui/material';import{PhotoCamera,AccountCircle,Palette,Save,Cancel}from'@mui/icons-material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AvatarUploadDialog=_ref=>{let{open,onClose,currentAvatar,onAvatarUpdate}=_ref;const[uploading,setUploading]=useState(false);const[avatarUrl,setAvatarUrl]=useState(currentAvatar||'');const[selectedPreset,setSelectedPreset]=useState(null);const[error,setError]=useState('');// Preset avatar colors/gradients\nconst presetAvatars=[{id:1,bg:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',name:'Purple'},{id:2,bg:'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',name:'Pink'},{id:3,bg:'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',name:'Blue'},{id:4,bg:'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',name:'Green'},{id:5,bg:'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',name:'Orange'},{id:6,bg:'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',name:'Pastel'},{id:7,bg:'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)',name:'Rose'},{id:8,bg:'linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)',name:'Lavender'}];const handleFileUpload=async event=>{const file=event.target.files[0];if(!file)return;// Validate file type\nif(!file.type.startsWith('image/')){setError('Please select an image file');return;}// Validate file size (5MB max)\nif(file.size>5*1024*1024){setError('Image must be less than 5MB');return;}try{setUploading(true);setError('');const formData=new FormData();formData.append('avatar',file);const response=await fetch('/api/users/avatar',{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))},body:formData});if(!response.ok){throw new Error('Failed to upload avatar');}const data=await response.json();setAvatarUrl(data.avatarUrl);}catch(error){console.error('Avatar upload error:',error);setError('Failed to upload avatar. Please try again.');}finally{setUploading(false);}};const handlePresetSelect=preset=>{setSelectedPreset(preset.id);setAvatarUrl(\"gradient:\".concat(preset.bg));};const handleSave=()=>{onAvatarUpdate(avatarUrl);onClose();};const handleCancel=()=>{setAvatarUrl(currentAvatar||'');setSelectedPreset(null);setError('');onClose();};return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleCancel,maxWidth:\"md\",fullWidth:true,transitionDuration:400,PaperProps:{sx:{background:'linear-gradient(135deg, rgba(40,40,60,0.95) 0%, rgba(60,60,80,0.95) 100%)',backdropFilter:'blur(24px) saturate(180%)',borderRadius:'20px',border:'1.5px solid rgba(255,255,255,0.10)',boxShadow:'0 8px 40px 0 rgba(102,126,234,0.18)'}},children:[/*#__PURE__*/_jsxs(DialogTitle,{sx:{color:'white',textAlign:'center',fontWeight:700,letterSpacing:0.5,fontSize:'1.5rem',pb:1},children:[/*#__PURE__*/_jsx(PhotoCamera,{sx:{mr:1,verticalAlign:'middle'}}),\"Update Profile Picture\"]}),/*#__PURE__*/_jsxs(DialogContent,{sx:{pb:0},children:[error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:error}),/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center',mb:4},children:[/*#__PURE__*/_jsx(Avatar,{src:avatarUrl.startsWith('gradient:')?undefined:avatarUrl,sx:{width:120,height:120,margin:'0 auto',fontSize:'3rem',background:avatarUrl.startsWith('gradient:')?avatarUrl.replace('gradient:',''):'#ccc'},children:!avatarUrl&&/*#__PURE__*/_jsx(AccountCircle,{sx:{fontSize:'4rem'}})}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{color:'#ccc',mt:1},children:\"Preview\"})]}),/*#__PURE__*/_jsx(Card,{sx:{bgcolor:'#2a2a2a',mb:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{color:'white',mb:2},children:\"Upload Custom Image\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2},children:[/*#__PURE__*/_jsxs(Button,{variant:\"contained\",component:\"label\",startIcon:uploading?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(PhotoCamera,{}),disabled:uploading,sx:{bgcolor:'#667eea'},children:[\"Choose File\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true,accept:\"image/*\",onChange:handleFileUpload})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{color:'#ccc'},children:\"JPG, PNG, GIF up to 5MB\"})]})]})}),/*#__PURE__*/_jsx(Card,{sx:{bgcolor:'#2a2a2a',mb:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{color:'white',mb:2},children:\"Use Image URL\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,placeholder:\"https://example.com/image.jpg\",value:avatarUrl.startsWith('gradient:')?'':avatarUrl,onChange:e=>setAvatarUrl(e.target.value),sx:{'& .MuiInputBase-input':{color:'white'},'& .MuiOutlinedInput-root':{'& fieldset':{borderColor:'#555'},'&:hover fieldset':{borderColor:'#777'},'&.Mui-focused fieldset':{borderColor:'#667eea'}}}})]})}),/*#__PURE__*/_jsx(Card,{sx:{bgcolor:'#2a2a2a'},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",sx:{color:'white',mb:2},children:[/*#__PURE__*/_jsx(Palette,{sx:{mr:1,verticalAlign:'middle'}}),\"Choose Style\"]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:presetAvatars.map(preset=>/*#__PURE__*/_jsx(Grid,{item:true,xs:3,children:/*#__PURE__*/_jsxs(Box,{sx:{textAlign:'center',cursor:'pointer','&:hover':{transform:'scale(1.1)'},transition:'transform 0.2s'},onClick:()=>handlePresetSelect(preset),children:[/*#__PURE__*/_jsx(Avatar,{sx:{width:60,height:60,margin:'0 auto',background:preset.bg,border:selectedPreset===preset.id?'3px solid #667eea':'2px solid transparent'}}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'#ccc',mt:1,display:'block'},children:preset.name})]})},preset.id))})]})})]}),/*#__PURE__*/_jsxs(DialogActions,{sx:{p:3,justifyContent:'center',gap:2},children:[/*#__PURE__*/_jsx(Button,{onClick:handleCancel,startIcon:/*#__PURE__*/_jsx(Cancel,{}),sx:{color:'#fff',background:'rgba(255,255,255,0.08)',borderRadius:2,px:3,fontWeight:500,boxShadow:'0 2px 8px 0 rgba(102,126,234,0.10)',transition:'background 0.2s','&:hover':{background:'rgba(255,255,255,0.18)'}},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSave,startIcon:/*#__PURE__*/_jsx(Save,{}),variant:\"contained\",sx:{bgcolor:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'#fff',borderRadius:2,px:3,fontWeight:600,boxShadow:'0 4px 16px 0 rgba(102,126,234,0.18)',transition:'background 0.2s','&:hover':{bgcolor:'linear-gradient(135deg, #764ba2 0%, #667eea 100%)'}},children:\"Save Changes\"})]})]});};export default AvatarUploadDialog;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}