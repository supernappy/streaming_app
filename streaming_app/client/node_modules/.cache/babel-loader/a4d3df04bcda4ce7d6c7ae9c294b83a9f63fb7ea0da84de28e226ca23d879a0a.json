{"ast":null,"code":"// Centralized API base URL + fetch wrapper\n// Uses REACT_APP_API_URL when provided; falls back to localhost:5002 in dev (port 3002)\n\nconst inferDefaultBase = () => {\n  try {\n    if (typeof window !== 'undefined') {\n      const {\n        protocol,\n        hostname,\n        port\n      } = window.location;\n      // If running the React dev server on 3002, default API to 5002\n      if (port === '3002') return `${protocol}//${hostname}:5002`;\n      // Otherwise assume same origin\n      return `${protocol}//${hostname}${port ? `:${port}` : ''}`;\n    }\n  } catch (_) {}\n  return 'http://localhost:5002';\n};\nexport const API_BASE = process.env.REACT_APP_API_URL || inferDefaultBase();\nexport function apiUrl(path) {\n  if (!path) return API_BASE;\n  if (/^https?:\\/\\//i.test(path)) return path;\n  if (!path.startsWith('/')) path = `/${path}`;\n  return `${API_BASE}${path}`;\n}\nexport async function apiFetch(path, options = {}) {\n  const url = apiUrl(path);\n  return fetch(url, options);\n}","map":{"version":3,"names":["inferDefaultBase","window","protocol","hostname","port","location","_","API_BASE","process","env","REACT_APP_API_URL","apiUrl","path","test","startsWith","apiFetch","options","url","fetch"],"sources":["/Users/walesolagbade/streaming_app/client/src/utils/api.js"],"sourcesContent":["// Centralized API base URL + fetch wrapper\n// Uses REACT_APP_API_URL when provided; falls back to localhost:5002 in dev (port 3002)\n\nconst inferDefaultBase = () => {\n  try {\n    if (typeof window !== 'undefined') {\n      const { protocol, hostname, port } = window.location;\n      // If running the React dev server on 3002, default API to 5002\n      if (port === '3002') return `${protocol}//${hostname}:5002`;\n      // Otherwise assume same origin\n      return `${protocol}//${hostname}${port ? `:${port}` : ''}`;\n    }\n  } catch (_) {}\n  return 'http://localhost:5002';\n};\n\nexport const API_BASE = process.env.REACT_APP_API_URL || inferDefaultBase();\n\nexport function apiUrl(path) {\n  if (!path) return API_BASE;\n  if (/^https?:\\/\\//i.test(path)) return path;\n  if (!path.startsWith('/')) path = `/${path}`;\n  return `${API_BASE}${path}`;\n}\n\nexport async function apiFetch(path, options = {}) {\n  const url = apiUrl(path);\n  return fetch(url, options);\n}\n"],"mappings":"AAAA;AACA;;AAEA,MAAMA,gBAAgB,GAAGA,CAAA,KAAM;EAC7B,IAAI;IACF,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;MACjC,MAAM;QAAEC,QAAQ;QAAEC,QAAQ;QAAEC;MAAK,CAAC,GAAGH,MAAM,CAACI,QAAQ;MACpD;MACA,IAAID,IAAI,KAAK,MAAM,EAAE,OAAO,GAAGF,QAAQ,KAAKC,QAAQ,OAAO;MAC3D;MACA,OAAO,GAAGD,QAAQ,KAAKC,QAAQ,GAAGC,IAAI,GAAG,IAAIA,IAAI,EAAE,GAAG,EAAE,EAAE;IAC5D;EACF,CAAC,CAAC,OAAOE,CAAC,EAAE,CAAC;EACb,OAAO,uBAAuB;AAChC,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAIV,gBAAgB,CAAC,CAAC;AAE3E,OAAO,SAASW,MAAMA,CAACC,IAAI,EAAE;EAC3B,IAAI,CAACA,IAAI,EAAE,OAAOL,QAAQ;EAC1B,IAAI,eAAe,CAACM,IAAI,CAACD,IAAI,CAAC,EAAE,OAAOA,IAAI;EAC3C,IAAI,CAACA,IAAI,CAACE,UAAU,CAAC,GAAG,CAAC,EAAEF,IAAI,GAAG,IAAIA,IAAI,EAAE;EAC5C,OAAO,GAAGL,QAAQ,GAAGK,IAAI,EAAE;AAC7B;AAEA,OAAO,eAAeG,QAAQA,CAACH,IAAI,EAAEI,OAAO,GAAG,CAAC,CAAC,EAAE;EACjD,MAAMC,GAAG,GAAGN,MAAM,CAACC,IAAI,CAAC;EACxB,OAAOM,KAAK,CAACD,GAAG,EAAED,OAAO,CAAC;AAC5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}