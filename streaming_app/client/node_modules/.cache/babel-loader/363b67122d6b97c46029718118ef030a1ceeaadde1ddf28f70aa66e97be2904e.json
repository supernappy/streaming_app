{"ast":null,"code":"import React from'react';import{Card,CardContent,CardMedia,Typography,Box,IconButton,Chip,Tooltip,Avatar}from'@mui/material';import{MusicNote,PlayArrow,Favorite,ShareRounded}from'@mui/icons-material';import Snackbar from'@mui/material/Snackbar';/**\n * Universal TrackCard for displaying tracks consistently across the app.\n * Props:\n * - track: { id, title, artist, cover_url, play_count, duration, ... }\n * - onPlay, onFavorite, onShare: optional handlers\n * - showActions: bool (default true)\n * - highlight: bool (optional, for current/playing track)\n */// Helper to format duration in seconds to mm:ss\nfunction formatDuration(duration){if(duration==null||isNaN(duration))return'0:00';let seconds=Number(duration);// If duration is a string, try to parse\nif(typeof duration==='string'){seconds=parseFloat(duration);if(isNaN(seconds))return'0:00';}// If duration is in ms, convert to seconds if > 1000\nif(seconds>1000){// Heuristic: treat as ms if > 1000\nseconds=Math.round(seconds/1000);}const m=Math.floor(seconds/60);const s=Math.round(seconds%60);return\"\".concat(m,\":\").concat(s.toString().padStart(2,'0'));}import{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TrackCard=_ref=>{let{track,onPlay,onFavorite,onShare,showActions=true,highlight=false,children}=_ref;const[snackbarOpen,setSnackbarOpen]=useState(false);const handleShare=async()=>{const url=window.location.origin+\"/track/\".concat(track.id);try{await navigator.clipboard.writeText(url);setSnackbarOpen(true);}catch(e){setSnackbarOpen(true);}if(onShare)onShare(track);};return/*#__PURE__*/_jsxs(Card,{sx:{display:'flex',alignItems:'center',bgcolor:highlight?'primary.light':'background.paper',boxShadow:highlight?6:1,borderRadius:3,mb:2,p:1,minWidth:0,transition:'box-shadow 0.2s','&:hover':{boxShadow:8}},children:[/*#__PURE__*/_jsx(CardMedia,{children:/*#__PURE__*/_jsx(Avatar,{src:track.cover_url||'/default_cover.png',alt:track.title,sx:{width:56,height:56,mr:2,bgcolor:'grey.800'},variant:\"rounded\",children:/*#__PURE__*/_jsx(MusicNote,{})})}),/*#__PURE__*/_jsxs(CardContent,{sx:{flex:1,minWidth:0,p:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",noWrap:true,children:track.title}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",noWrap:true,children:track.artist}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1,mt:0.5},children:[/*#__PURE__*/_jsx(Chip,{label:\"Plays: \".concat(track.play_count||0),size:\"small\"}),/*#__PURE__*/_jsx(Chip,{label:formatDuration(track.duration),size:\"small\"})]}),children]}),showActions&&/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'row',alignItems:'center',pr:1,gap:0.5,mt:1},children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Play\",children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>onPlay===null||onPlay===void 0?void 0:onPlay(track),color:\"primary\",size:\"small\",children:/*#__PURE__*/_jsx(PlayArrow,{})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Favorite\",children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>onFavorite===null||onFavorite===void 0?void 0:onFavorite(track),color:\"secondary\",size:\"small\",children:/*#__PURE__*/_jsx(Favorite,{})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Share\",children:/*#__PURE__*/_jsx(IconButton,{onClick:handleShare,color:\"info\",size:\"small\",sx:{bgcolor:'info.light',color:'white',transition:'transform 0.15s','&:hover':{bgcolor:'info.main',transform:'scale(1.12) rotate(-8deg)'}},children:/*#__PURE__*/_jsx(ShareRounded,{sx:{fontSize:20}})})}),/*#__PURE__*/_jsx(Snackbar,{open:snackbarOpen,autoHideDuration:1800,onClose:()=>setSnackbarOpen(false),message:\"Track link copied!\",anchorOrigin:{vertical:'bottom',horizontal:'center'}})]})]});};export default TrackCard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}