{"ast":null,"code":"var _jsxFileName = \"/Users/walesolagbade/streaming_app/client/src/components/PlayEventsDebugPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useSocket } from '../contexts/SocketContext_enhanced';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst panelStyle = {\n  position: 'fixed',\n  bottom: 24,\n  right: 24,\n  width: 340,\n  maxHeight: 320,\n  background: 'rgba(24,28,36,0.98)',\n  color: '#fff',\n  border: '1px solid #333',\n  borderRadius: 10,\n  zIndex: 9999,\n  fontSize: 13,\n  boxShadow: '0 4px 24px rgba(0,0,0,0.4)',\n  padding: 12,\n  overflowY: 'auto',\n  fontFamily: 'monospace'\n};\nexport default function PlayEventsDebugPanel() {\n  _s();\n  const {\n    socket\n  } = useSocket();\n  const [events, setEvents] = useState([]);\n  useEffect(() => {\n    if (!socket) return;\n    const handler = payload => {\n      setEvents(prev => [{\n        type: 'socket',\n        ts: Date.now(),\n        payload\n      }, ...prev.slice(0, 49)]);\n    };\n    socket.on('track:play-count-updated', handler);\n    return () => socket.off('track:play-count-updated', handler);\n  }, [socket]);\n\n  // Listen for local play-count POSTs (window event)\n  useEffect(() => {\n    const handler = e => {\n      if (e.detail && e.detail.type === 'play-increment') {\n        setEvents(prev => [{\n          type: 'local',\n          ts: Date.now(),\n          payload: e.detail\n        }, ...prev.slice(0, 49)]);\n      }\n    };\n    window.addEventListener('play-debug', handler);\n    return () => window.removeEventListener('play-debug', handler);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: panelStyle,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontWeight: 'bold',\n        marginBottom: 6\n      },\n      children: \"Play Events Debug\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), events.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#aaa'\n      },\n      children: \"No play events yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 31\n    }, this), events.map((ev, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: ev.type === 'socket' ? '#1DB954' : '#ffb300'\n        },\n        children: [\"[\", ev.type === 'socket' ? 'SOCKET' : 'LOCAL', \"]\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: '#888'\n        },\n        children: new Date(ev.ts).toLocaleTimeString()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          wordBreak: 'break-all'\n        },\n        children: JSON.stringify(ev.payload)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(PlayEventsDebugPanel, \"q0UmTfzjbbG7p4y2Dg0YFpQ8sJk=\", false, function () {\n  return [useSocket];\n});\n_c = PlayEventsDebugPanel;\nvar _c;\n$RefreshReg$(_c, \"PlayEventsDebugPanel\");","map":{"version":3,"names":["React","useEffect","useState","useSocket","jsxDEV","_jsxDEV","panelStyle","position","bottom","right","width","maxHeight","background","color","border","borderRadius","zIndex","fontSize","boxShadow","padding","overflowY","fontFamily","PlayEventsDebugPanel","_s","socket","events","setEvents","handler","payload","prev","type","ts","Date","now","slice","on","off","e","detail","window","addEventListener","removeEventListener","style","children","fontWeight","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","length","map","ev","i","toLocaleTimeString","wordBreak","JSON","stringify","_c","$RefreshReg$"],"sources":["/Users/walesolagbade/streaming_app/client/src/components/PlayEventsDebugPanel.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSocket } from '../contexts/SocketContext_enhanced';\n\nconst panelStyle = {\n  position: 'fixed',\n  bottom: 24,\n  right: 24,\n  width: 340,\n  maxHeight: 320,\n  background: 'rgba(24,28,36,0.98)',\n  color: '#fff',\n  border: '1px solid #333',\n  borderRadius: 10,\n  zIndex: 9999,\n  fontSize: 13,\n  boxShadow: '0 4px 24px rgba(0,0,0,0.4)',\n  padding: 12,\n  overflowY: 'auto',\n  fontFamily: 'monospace',\n};\n\nexport default function PlayEventsDebugPanel() {\n  const { socket } = useSocket();\n  const [events, setEvents] = useState([]);\n\n  useEffect(() => {\n    if (!socket) return;\n    const handler = (payload) => {\n      setEvents((prev) => [\n        { type: 'socket', ts: Date.now(), payload },\n        ...prev.slice(0, 49)\n      ]);\n    };\n    socket.on('track:play-count-updated', handler);\n    return () => socket.off('track:play-count-updated', handler);\n  }, [socket]);\n\n  // Listen for local play-count POSTs (window event)\n  useEffect(() => {\n    const handler = (e) => {\n      if (e.detail && e.detail.type === 'play-increment') {\n        setEvents((prev) => [\n          { type: 'local', ts: Date.now(), payload: e.detail },\n          ...prev.slice(0, 49)\n        ]);\n      }\n    };\n    window.addEventListener('play-debug', handler);\n    return () => window.removeEventListener('play-debug', handler);\n  }, []);\n\n  return (\n    <div style={panelStyle}>\n      <div style={{ fontWeight: 'bold', marginBottom: 6 }}>Play Events Debug</div>\n      {events.length === 0 && <div style={{ color: '#aaa' }}>No play events yet.</div>}\n      {events.map((ev, i) => (\n        <div key={i} style={{ marginBottom: 4 }}>\n          <span style={{ color: ev.type === 'socket' ? '#1DB954' : '#ffb300' }}>\n            [{ev.type === 'socket' ? 'SOCKET' : 'LOCAL'}]\n          </span>{' '}\n          <span style={{ color: '#888' }}>{new Date(ev.ts).toLocaleTimeString()}</span>{' '}\n          <span style={{ wordBreak: 'break-all' }}>{JSON.stringify(ev.payload)}</span>\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}