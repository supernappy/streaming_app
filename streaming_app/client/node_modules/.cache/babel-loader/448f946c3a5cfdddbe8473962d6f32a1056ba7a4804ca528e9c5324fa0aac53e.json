{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Box,Card,CardContent,Typography,IconButton,Slider,LinearProgress,Avatar,Chip,Tooltip,Fade,Zoom,ButtonGroup,Button}from'@mui/material';import{PlayArrow,Pause,SkipNext,SkipPrevious,VolumeUp,VolumeDown,VolumeOff,Shuffle,Repeat,RepeatOne,FavoriteBorder,Favorite,QueueMusic,Equalizer,FullscreenExit,Fullscreen,Share,Download,Close}from'@mui/icons-material';import{usePlayer}from'../contexts/PlayerContext';import{formatPlays}from'../utils/format';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AudioPlayer=_ref=>{let{track,onPlay,compact=false,showIndex=null}=_ref;const[visible,setVisible]=useState(true);if(!visible)return null;const{currentTrack,isPlaying,playTrack}=usePlayer();const[isHovered,setIsHovered]=useState(false);const[audioWaves,setAudioWaves]=useState(Array(40).fill(0));const[ripples,setRipples]=useState([]);const waveIntervalRef=useRef();const isCurrentTrack=currentTrack&&currentTrack.id===track.id;const isTrackPlaying=isCurrentTrack&&isPlaying;// Generate audio wave animation\nuseEffect(()=>{if(isTrackPlaying){waveIntervalRef.current=setInterval(()=>{setAudioWaves(prev=>prev.map(()=>Math.random()*100));},150);}else{clearInterval(waveIntervalRef.current);setAudioWaves(Array(40).fill(0));}return()=>clearInterval(waveIntervalRef.current);},[isTrackPlaying]);const handlePlay=()=>{if(isCurrentTrack){// Track is already current, just toggle play/pause\nreturn;}// Add ripple effect\nconst newRipple={id:Date.now(),x:Math.random()*100,y:Math.random()*100};setRipples(prev=>[...prev,newRipple]);// Remove ripple after animation\nsetTimeout(()=>{setRipples(prev=>prev.filter(r=>r.id!==newRipple.id));},1000);playTrack(track);if(onPlay)onPlay(track);};const formatDuration=seconds=>{if(!seconds)return'--:--';const mins=Math.floor(seconds/60);const secs=Math.floor(seconds%60);return`${mins}:${secs.toString().padStart(2,'0')}`;};if(compact){return/*#__PURE__*/_jsxs(Card,{sx:{position:'relative',background:isTrackPlaying?'#667eea':'#2a2a2a',color:'white',minWidth:200,maxWidth:400,margin:'16px auto',padding:2,borderRadius:3,boxShadow:'0 8px 25px rgba(0,0,0,0.15)'},children:[/*#__PURE__*/_jsx(IconButton,{onClick:e=>{e.stopPropagation();setVisible(false);},sx:{position:'absolute',top:8,right:8,color:'white',zIndex:2},\"aria-label\":\"Close player\",children:/*#__PURE__*/_jsx(Close,{})}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:2},children:[/*#__PURE__*/_jsx(Avatar,{src:track.cover_url,sx:{width:56,height:56,mr:2}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{color:'white',fontWeight:600},children:track.title}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{color:'rgba(255,255,255,0.7)'},children:track.artist})]})]})]});}// Main (non-compact) render\nreturn/*#__PURE__*/_jsx(Card,{sx:{borderRadius:3,boxShadow:isTrackPlaying?'0 0 30px rgba(102, 126, 234, 0.3)':'0 8px 32px rgba(0, 0, 0, 0.3)',background:isTrackPlaying?'linear-gradient(135deg, #667eea 0%, #764ba2 100%)':'linear-gradient(135deg, #232526 0%, #414345 100%)',color:isTrackPlaying?'white':'inherit',position:'relative',overflow:'visible',p:0,mb:2,transition:'all 0.3s ease-in-out',minWidth:320,maxWidth:600,mx:'auto'},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(Box,{sx:{display:'flex',alignItems:'center',gap:2}})})});};export default AudioPlayer;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}